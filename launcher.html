<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="Content-Security-Policy" 
        content="default-src 'self'; 
                 script-src 'self'; 
                 style-src 'self' 'unsafe-inline'; 
                 img-src 'self' data:; 
                 connect-src 'self';
                 font-src 'self';
                 object-src 'none';
                 base-uri 'self';
                 form-action 'self';">
  <meta http-equiv="X-Content-Type-Options" content="nosniff">
  <meta name="referrer" content="strict-origin-when-cross-origin">
  <title>Flyff Mob Tracker - Launcher</title>
  <link rel="stylesheet" href="launcher.css" />
</head>
<body>
  <div class="launcher">
    <header class="launcher-header">
      <h1>Flyff Mob Tracker</h1>
      <span class="version">v2.1 Launcher</span>
    </header>

    <section class="characters-section">
      <div class="section-header">
        <h2>Characters</h2>
        <button id="addCharBtn" class="btn btn-add">
          <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
            <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
          </svg>
          Add Character
        </button>
      </div>

      <div id="characterList" class="character-list">
        <!-- Characters will be rendered here -->
        <div class="no-characters">
          <p>No characters added yet.</p>
          <p class="hint">Click "Add Character" to get started.</p>
        </div>
      </div>
    </section>

    <section class="quick-actions">
      <button id="launchSelectedBtn" class="btn btn-primary btn-large" disabled>
        <svg viewBox="0 0 24 24" fill="currentColor" width="20" height="20">
          <path d="M8 5v14l11-7z"/>
        </svg>
        Launch Selected
      </button>
      
      <button id="launchAllBtn" class="btn btn-secondary">
        Launch All
      </button>
    </section>

    <section class="plugins-section">
      <h3 class="plugins-title">Plugins</h3>
      <div class="plugins-grid">
        <button id="cooldownBtn" class="btn btn-plugin">
          <svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18">
            <path d="M15 1H9v2h6V1zm-4 13h2V8h-2v6zm8.03-6.61l1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61zM12 20c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"/>
          </svg>
          Buff Cooldowns
        </button>
        <button id="keyforwardBtn" class="btn btn-plugin btn-plugin-purple">
          <svg viewBox="0 0 24 24" fill="currentColor" width="18" height="18">
            <path d="M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z"/>
          </svg>
          Key Forwarder
        </button>
      </div>
    </section>

    <footer class="launcher-footer">
      <button id="settingsBtn" class="btn btn-text">
        <svg viewBox="0 0 24 24" fill="currentColor" width="16" height="16">
          <path d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.06-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.04.31-.06.63-.06.94s.02.63.06.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"/>
        </svg>
        Settings
      </button>
      <span class="footer-text">Flyff Mob Tracker Â© 2025</span>
    </footer>
  </div>

  <!-- Add/Edit Character Modal -->
  <div id="charModal" class="modal hidden">
    <div class="modal-content">
      <h3 id="modalTitle">Add Character</h3>
      
      <label class="field">
        <span class="field-label">Character Name</span>
        <input id="charName" type="text" class="field-input" placeholder="e.g., MyBlade" />
      </label>
      
      <label class="field">
        <span class="field-label">Server</span>
        <select id="charServer" class="field-input">
          <option value="Mushpoie">Mushpoie</option>
          <option value="Totemia">Totemia</option>
          <option value="Glaphan">Glaphan</option>
          <option value="Rhisis">Rhisis</option>
          <option value="Other">Other</option>
        </select>
      </label>
      
      <label class="field">
        <span class="field-label">Class</span>
        <select id="charClass" class="field-input">
          <option value="">Select class...</option>
          <option value="Vagrant">Vagrant</option>
          <option value="Mercenary">Mercenary</option>
          <option value="Acrobat">Acrobat</option>
          <option value="Assist">Assist</option>
          <option value="Magician">Magician</option>
          <option value="Knight">Knight</option>
          <option value="Blade">Blade</option>
          <option value="Jester">Jester</option>
          <option value="Ranger">Ranger</option>
          <option value="Ringmaster">Ringmaster</option>
          <option value="Billposter">Billposter</option>
          <option value="Psykeeper">Psykeeper</option>
          <option value="Elementor">Elementor</option>
        </select>
      </label>
      
      <label class="field">
        <span class="field-label">Tracking Mode</span>
        <select id="charTrackingMode" class="field-input">
          <option value="1v1">1v1 Mode (Pixel Diff + GPT)</option>
          <option value="aoe">AOE Mode (GPT Only)</option>
          <option value="none">Game Only (No Tracker)</option>
        </select>
        <span class="field-hint">RM/Support chars can use "Game Only" mode</span>
      </label>
      
      <label class="field">
        <span class="field-label">Color Tag</span>
        <div class="color-picker">
          <input type="radio" name="charColor" value="#ffd800" id="colorYellow" checked />
          <label for="colorYellow" style="background: #ffd800"></label>
          
          <input type="radio" name="charColor" value="#22c55e" id="colorGreen" />
          <label for="colorGreen" style="background: #22c55e"></label>
          
          <input type="radio" name="charColor" value="#3b82f6" id="colorBlue" />
          <label for="colorBlue" style="background: #3b82f6"></label>
          
          <input type="radio" name="charColor" value="#ef4444" id="colorRed" />
          <label for="colorRed" style="background: #ef4444"></label>
          
          <input type="radio" name="charColor" value="#a855f7" id="colorPurple" />
          <label for="colorPurple" style="background: #a855f7"></label>
        </div>
      </label>
      
      <div class="modal-actions">
        <button id="cancelCharBtn" class="btn btn-secondary">Cancel</button>
        <button id="saveCharBtn" class="btn btn-primary">Save</button>
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div id="settingsModal" class="modal hidden">
    <div class="modal-content">
      <h3>Launcher Settings</h3>
      
      <label class="field">
        <span class="field-label">OpenAI API Key</span>
        <input id="openaiKey" type="password" class="field-input" placeholder="sk-..." />
        <span class="field-hint">Required for GPT-4 Vision OCR</span>
      </label>
      
      <div class="settings-section">
        <span class="field-label">Data Location</span>
        <div class="data-path" id="dataPath">Loading...</div>
        <button id="openDataFolderBtn" class="btn btn-secondary btn-small">Open Folder</button>
      </div>
      
      <div class="modal-actions">
        <button id="closeSettingsBtn" class="btn btn-primary">Save & Close</button>
      </div>
    </div>
  </div>

  <script src="launcher-renderer.js"></script>
</body>
</html>